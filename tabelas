CREATE TABLE CLIENTE (
ID_CLIENTE SERIAL PRIMARY KEY,
NOME VARCHAR(100),
EMAIL VARCHAR(100) UNIQUE,
TELEFONE VARCHAR(20)
);

CREATE TABLE FUNCIONARIO(
ID_FUNCIONARIO SERIAL PRIMARY KEY,
NOME VARCHAR(100) NOT NULL,
DATA_ADMISSAO DATE NOT NULL,
CARGO VARCHAR(50) NOT NULL
);

CREATE TABLE FORNECEDOR(
ID_FORNECEDOR SERIAL PRIMARY KEY,
NOME VARCHAR(100) NOT NULL,
TELEFONE VARCHAR(20) NOT NULL,
CNPJ VARCHAR(14) NOT NULL UNIQUE
);

CREATE TABLE FORMA_PAGAMENTO(
ID_PAGAMENTO SERIAL PRIMARY KEY,
NOME_PAGAMENTO VARCHAR(50) NOT NULL
);

CREATE TABLE VENDA(
ID_VENDA SERIAL PRIMARY KEY,
VALOR_TOTAL NUMERIC(10,2),
DATA_VENDA DATE,
ID_CLIENTE INT,
ID_FUNCIONARIO INT,
FOREIGN KEY(ID_CLIENTE) REFERENCES CLIENTE(ID_CLIENTE),
FOREIGN KEY(ID_FUNCIONARIO) REFERENCES FUNCIONARIO(ID_FUNCIONARIO)
);


CREATE TABLE PRODUTO(
ID_PRODUTO SERIAL PRIMARY KEY,
ID_FORNECEDOR INT,
NOME VARCHAR(100) NOT NULL,
PRECO NUMERIC(10,2) NOT NULL,
TIPO VARCHAR(50),
PLATAFORMA VARCHAR(50),
ESTOQUE INT NOT NULL ,
FOREIGN KEY(ID_FORNECEDOR) REFERENCES FORNECEDOR(ID_FORNECEDOR)
)

CREATE TABLE ITEM_VENDA(
ID_VENDA INT,
ID_PRODUTO INT,
QUANTIDADE INT NOT NULL,
PRECO_UNITARIO NUMERIC(10,2) NOT NULL,
PRIMARY KEY(ID_VENDA, ID_PRODUTO),
FOREIGN KEY(ID_VENDA) REFERENCES VENDA(ID_VENDA),
FOREIGN KEY(ID_PRODUTO) REFERENCES PRODUTO(ID_PRODUTO)
);


CREATE TABLE COMPRA (
ID_COMPRA SERIAL PRIMARY KEY,
ID_FORNECEDOR INT NOT NULL,
DATA_COMPRA DATE NOT NULL,
VALOR_TOTAL DECIMAL(10,2) NOT NULL,
STATUS_PAGAMENTO VARCHAR(20) CHECK (STATUS_PAGAMENTO IN ('PENDENTE', 'PAGO', 'CANCELADO')),
FORMA_PAGAMENTO VARCHAR(20),
FOREIGN KEY (ID_FORNECEDOR) REFERENCES FORNECEDOR(ID_FORNECEDOR)
);
